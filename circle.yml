dependencies:
  pre:
    - sudo gem install cupertino
    - sudo gem install shenzhen

machine:
  xcode:
    version: '6.4'
  environment:
    XCODE_SCHEME: CircleCI-Test

test:
  override:
    - xcodebuild -project CircleCI-Test.xcodeproj -scheme CircleCI-Test -destination 'name=iPhone 6' clean test

deployment:
  deploygate:
    branch: master
    commands:
      - ./scripts/profile.sh
      - ./scripts/add-key.sh
      - ./scripts/build.sh
      - ./scripts/remove-key.sh
      - ./scripts/deploygate.sh
